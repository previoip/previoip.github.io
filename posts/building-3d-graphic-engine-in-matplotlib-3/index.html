<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HTK24ZVY8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HTK24ZVY8")}</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href="/css/highlight.css?v=1.0.0"><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,theme:"dark"})</script><style>:root{--f:1em;--w:30}html{margin:0 2em;max-width:calc(var(--f)*var(--w));font-size:var(--f)}body{margin:0;padding:0;font-family:monospace;scrollbar-face-color:ThreeDFace!important;scrollbar-shadow-color:ThreeDDarkShadow!important;scrollbar-highlight-color:ThreeDHighlight!important;scrollbar-3dlight-color:ThreeDLightShadow!important;scrollbar-darkshadow-color:ThreeDDarkShadow!important;scrollbar-track-color:Scrollbar!important;scrollbar-arrow-color:ButtonText!important}*{font-size:inherit}p{padding-left:calc(var(--f)*1.6)}a{color:#2d6ed7;text-decoration:underline}a:hover{color:#104db0;text-decoration:none}a:active{color:#2d6ed7;text-decoration:none;background-color:var(--tx-c-hover)}blockquote{opacity:.75;background-color:#e9e61c68}div.mermaid .edgeLabel{padding:.2rem}img,div.mermaid svg{margin:auto;display:block;max-width:min(100%,calc(var(--f)*var(--w)));min-width:100px;background-color:#282a36;border-radius:.6rem}code:not([class]){background-color:#8e98d575;padding:0 .2em;border-radius:.2em}div.highlight pre{padding:1rem;border-radius:.6rem;overflow:scroll;overflow-y:auto;overflow-x:auto}div.highlight pre code span{margin-block-end:.1em}.disabled,.failed{pointer-events:none}.tc{padding-left:0;padding-right:0;text-align:center}.o50{opacity:.5}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--tx-c-tp-primary-quarter);border-radius:3px}::-webkit-scrollbar-thumb{background:var(--tx-c-primary-half);border-radius:3px}</style><title>How I Built A Simple (Horrible) 3D Graphics Engine in python matplotlib - Part 3: Square but 3D &ndash; dumb by default</title></head><body><div style=background-color:#69696969><br><h1 class=tc>dumb by default</h1><nav class=tc>[<a href=/>Home</a>]&nbsp;[<a href=/about/>About</a>]&nbsp;[<a href=/posts/>Posts</a>]&nbsp;[<a href=/resources/>Resources</a>]&nbsp;</nav><hr></div><p style=padding:0><span>dir: <i><a href=/>Home</a> /
<a href=/posts/>Posts</a> /
<span>How I Built A Simple (Horrible) 3D Graphics …</span></i></span><br><span>published-date: 20 Jan 2023 18:02 +0700</span><br><span>categories: [<a href=http://previoip.github.io/categories/dumber-day-by-day/>dumber-day-by-day</a>] [<a href=http://previoip.github.io/categories/python-hijinks/>python-hijinks</a>]</span><br><span>tags: [<a href=http://previoip.github.io/tags/python/>python</a>] [<a href=http://previoip.github.io/tags/matplotlib/>matplotlib</a>]</span><br></p><h1 class=tc>How I Built A Simple (Horrible) 3D Graphics Engine in python matplotlib - Part 3: Square but 3D</h1><hr><div><h3 id=posts-in-this-series>Posts in This Series</h3><ul><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib/>Part 1 - Intro</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-2/>Part 2 - Plotting with plt</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-3/>Part 3 - Square but 3D</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-4/>Part 4 - Speen!</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-5/>Afterword</a></li></ul><hr><p>Now that we have the basic on plotting a line in plt, in this post I want to expand more on creating cube primitive.</p><h1 id=how-to-vertex class=tc>How to Vertex</h1><p>But first how would you store vertex coordinate in python? The easiest method is to store everything as 2D list buffer (or array if you prefer).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># vertices = [</span>
</span></span><span class=line><span class=cl><span class=c1>#   [x1, y1, z1, w1], Vertex, or point coordinate 1</span>
</span></span><span class=line><span class=cl><span class=c1>#   [x2, y2, z2, w2], Vertex 2</span>
</span></span><span class=line><span class=cl><span class=c1>#   [x3, y3, z3, w3], Vertex 3</span>
</span></span><span class=line><span class=cl><span class=c1>#   ...</span>
</span></span><span class=line><span class=cl><span class=c1># ]</span>
</span></span></code></pre></div><p>But wait, what&rsquo;s up with <code>w</code>? The most obvious answer lays on the matrix calculation I used in the entire project, which uses 4x4 matrix templates because 3x3 matrix transformation does not support perspective projection. Honestly I don&rsquo;t bother with projection matrixes and can&rsquo;t really explain for sure. But to quote a more advanced users:</p><blockquote><p>&ldquo;by dividing x, y and z by w you actually project this 4d point into 3d space.&rdquo;</p></blockquote><p>For now ignore its existence, and we assign w1 = w2 = w3 = wn = 1; n ∈ real positive integers</p><p>Now say, you want to make cube with <code>width</code>, <code>length</code>, and <code>height</code> as parameters. Center of mass lies in the center of the cube (duh). To add these into our vertices list, you can do one of the following.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># cube dimensions</span>
</span></span><span class=line><span class=cl><span class=n>width</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>length</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>height</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># empty vertex list as buffer</span>
</span></span><span class=line><span class=cl><span class=n>vertices</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=o>-</span><span class=n>width</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=p>(</span><span class=n>length</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=p>(</span><span class=n>height</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=n>vertices</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>i</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=n>j</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=n>k</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>vertices</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span> <span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span> <span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span> <span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span> <span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=o>-</span><span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=o>-</span><span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=o>-</span><span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span>  <span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=o>-</span><span class=n>width</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># either one is fine. Also notice the vertex order by the index in the list/array. </span>
</span></span><span class=line><span class=cl><span class=c1>#  6 - - - - 4</span>
</span></span><span class=line><span class=cl><span class=c1>#  | \       | \</span>
</span></span><span class=line><span class=cl><span class=c1>#  |   \     |   \</span>
</span></span><span class=line><span class=cl><span class=c1>#  |     2 - - - - 0        \ Width</span>
</span></span><span class=line><span class=cl><span class=c1>#  |     | c |     |        - Length</span>
</span></span><span class=line><span class=cl><span class=c1>#  7 - - | - 5     |        | Height</span>
</span></span><span class=line><span class=cl><span class=c1>#    \   |     \   |        c center(origin)</span>
</span></span><span class=line><span class=cl><span class=c1>#      \ |       \ |</span>
</span></span><span class=line><span class=cl><span class=c1>#        3 - - - - 1</span>
</span></span></code></pre></div><p>Cool!</p><h1 id=plotting-the-cube-with-magic-index class=tc>Plotting the Cube with ✨Magic Index✨</h1><p>To plot the cube in plt, we&rsquo;d have to cast this into <code>np.array</code> for splicing each of the axis coordinate.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># assuming you haven&#39;t already</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># casts the entire list buffer as np.array</span>
</span></span><span class=line><span class=cl><span class=n>vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>y_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>z_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>2</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ConstructSubplot3D</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=p>((</span><span class=nb>min</span><span class=p>(</span><span class=n>x_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>x_values</span><span class=p>)),</span> <span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>y_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>y_values</span><span class=p>)),</span> <span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>z_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>z_values</span><span class=p>))))</span> 
</span></span><span class=line><span class=cl><span class=n>ax</span><span class=o>.</span><span class=n>plot3D</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=n>z_values</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><img src=./images/Figure_1.png alt="Figure 1"><p>Whoa, shits fucked yo.</p><p>Looking back at the previous cube vertices generation code, the ordering of the vertex coordinate <em>does not represent on how the edges should be rendered</em>. In order to render edges or the wireframe of the cube, the order of the points should be reconstructed in a way that every line goes only at the edges. That&rsquo;s where <em>magic index</em> comes to help reordering the vertices list buffer.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>verts_to_wireframe</span><span class=p>(</span><span class=n>vertices</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=c1># this, does in fact, very inefficient memory-wise. Since we&#39;re basically cloning the list.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>n_b</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span> <span class=o>//</span> <span class=mi>8</span> <span class=c1># if there are more than one cube in the vertex buffer, floor-division with the amount of vertex in cube (8)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>magic_index</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>temp</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n_b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>magic_index</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=n>prev</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>r</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=n>prev</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=n>temp</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>vertices</span><span class=p>[(</span><span class=mi>8</span><span class=o>*</span><span class=n>n</span><span class=p>)</span> <span class=o>+</span> <span class=n>i</span><span class=p>])</span> 
</span></span><span class=line><span class=cl>        <span class=n>prev</span> <span class=o>=</span> <span class=n>i</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>temp</span><span class=p>)</span>
</span></span></code></pre></div><p>This magic index reordering follows the rule at previous cube generation. Different pattern may differ at how you&rsquo;d reorder the vertices. Basically the order draws one faces at each pass. Here&rsquo;s the sequence of the passes:</p><ul><li>front-face: <code>0 -> 1 -> 3 -> 2 -> 0</code></li><li>right-face: <code>0 -> 1 -> 5 -> 4 -> 0</code></li><li>top-face: <code>0 -> 2 -> 6 -> 4 -> 0</code></li><li>transition pass: <code>0 -> 2 -> 3 -> 7</code></li><li>left-face: <code>7 -> 3 -> 2 -> 6 -> 7</code></li><li>back-face: <code>7 -> 5 -> 4 -> 6 -> 7</code></li><li>bottom-face: <code>7 -> 3 -> 1 -> 5 -> 7</code></li></ul><p>Also unhelpful flow diagram showing all of index jumps.</p><div class=mermaid>flowchart LR
0 -- front --> 1
1 -- front --> 3
3 -- front --> 2
2 -- front --> 0
0 -- right --> 1
1 -- right --> 5
5 -- right --> 4
4 -- right --> 0
0 -- top --> 2
2 -- top --> 6
6 -- top --> 4
4 -- top --> 0
0 -. trans .-> 2
2 -. trans .-> 3
3 -. trans .-> 7
7 -- left --> 3
3 -- left --> 2
2 -- left --> 6
6 -- left --> 7
7 -- back --> 5
5 -- back --> 4
4 -- back --> 6
6 -- back --> 7
7 -- bottom --> 3
3 -- bottom --> 1
1 -- bottom --> 5
5 -- bottom --> 7</div><h1 id=now-everything-all-at-once class=tc>Now Everything All At Once</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln> 1</span><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>def</span> <span class=nf>ConstructSubplot3D</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=mi>5</span><span class=p>),</span> <span class=n>limit</span><span class=o>=</span><span class=p>((</span><span class=o>-</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>),(</span><span class=o>-</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>),(</span><span class=o>-</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>)),</span> <span class=n>elev</span><span class=o>=</span><span class=mi>60</span><span class=p>,</span> <span class=n>azim</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>dpi</span><span class=o>=</span><span class=mi>150</span><span class=p>):</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=k>return</span> <span class=n>plt</span><span class=o>.</span><span class=n>subplots</span><span class=p>(</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=n>figsize</span> <span class=o>=</span> <span class=n>figsize</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=n>dpi</span> <span class=o>=</span> <span class=n>dpi</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=n>subplot_kw</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=s2>&#34;projection&#34;</span><span class=p>:</span> <span class=s2>&#34;3d&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=s2>&#34;proj_type&#34;</span><span class=p>:</span><span class=s1>&#39;ortho&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=s2>&#34;elev&#34;</span><span class=p>:</span> <span class=n>elev</span><span class=p>,</span> 
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=s2>&#34;azim&#34;</span><span class=p>:</span> <span class=n>azim</span><span class=p>,</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=s2>&#34;xlim&#34;</span><span class=p>:</span> <span class=n>limit</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=s2>&#34;ylim&#34;</span><span class=p>:</span> <span class=n>limit</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=s2>&#34;zlim&#34;</span><span class=p>:</span> <span class=n>limit</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=k>def</span> <span class=nf>verts_to_wireframe</span><span class=p>(</span><span class=n>vertices</span><span class=p>):</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>  <span class=n>n_b</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span> <span class=o>//</span> <span class=mi>8</span> 
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl>  <span class=n>magic_index</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=p>(</span><span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>),</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>  <span class=n>temp</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>  <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n_b</span><span class=p>):</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>magic_index</span><span class=p>:</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>      <span class=n>prev</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>      <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>r</span><span class=p>:</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=n>prev</span><span class=p>:</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>          <span class=k>continue</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>          <span class=n>temp</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>vertices</span><span class=p>[(</span><span class=mi>8</span><span class=o>*</span><span class=n>n</span><span class=p>)</span> <span class=o>+</span> <span class=n>i</span><span class=p>])</span> 
</span></span><span class=line><span class=ln>43</span><span class=cl>        <span class=n>prev</span> <span class=o>=</span> <span class=n>i</span>  
</span></span><span class=line><span class=ln>44</span><span class=cl>
</span></span><span class=line><span class=ln>45</span><span class=cl>  <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>temp</span><span class=p>)</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>
</span></span><span class=line><span class=ln>47</span><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=ln>48</span><span class=cl>  <span class=n>width</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>  <span class=n>length</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>  <span class=n>height</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>
</span></span><span class=line><span class=ln>52</span><span class=cl>  <span class=n>vertices</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>
</span></span><span class=line><span class=ln>54</span><span class=cl>  <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=o>-</span><span class=n>width</span><span class=p>):</span>
</span></span><span class=line><span class=ln>55</span><span class=cl>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=p>(</span><span class=n>length</span><span class=p>,</span> <span class=o>-</span><span class=n>length</span><span class=p>):</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>      <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=p>(</span><span class=n>height</span><span class=p>,</span> <span class=o>-</span><span class=n>height</span><span class=p>):</span>
</span></span><span class=line><span class=ln>57</span><span class=cl>        <span class=n>vertices</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>i</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=n>j</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=n>k</span><span class=o>/</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>
</span></span><span class=line><span class=ln>59</span><span class=cl>  <span class=n>vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>  <span class=n>vertices</span> <span class=o>=</span> <span class=n>verts_to_wireframe</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl>  <span class=n>x_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=ln>63</span><span class=cl>  <span class=n>y_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=ln>64</span><span class=cl>  <span class=n>z_values</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[:,</span><span class=mi>2</span><span class=p>]</span> 
</span></span><span class=line><span class=ln>65</span><span class=cl>
</span></span><span class=line><span class=ln>66</span><span class=cl>  <span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ConstructSubplot3D</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=p>((</span><span class=nb>min</span><span class=p>(</span><span class=n>x_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>x_values</span><span class=p>)),</span> <span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>y_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>y_values</span><span class=p>)),</span> <span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>z_values</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>z_values</span><span class=p>))))</span> 
</span></span><span class=line><span class=ln>67</span><span class=cl>  <span class=n>ax</span><span class=o>.</span><span class=n>plot3D</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=n>z_values</span><span class=p>)</span>
</span></span><span class=line><span class=ln>68</span><span class=cl>  <span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span> <span class=c1># if the image does not show up from your interpreter, use colab instead</span>
</span></span></code></pre></div><img src=./images/Figure_2.png alt="Figure 2"><p>Golly! Now in the next post I&rsquo;ll cover linear transformation to the vertices we have made.</p></div><br><br><br><br><p class=tc>Built with <a a target=_blank class=extern href=https://gohugo.io/>Hugo</a> | previoip (c) 2024</p></body></html>