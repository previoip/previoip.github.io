<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HTK24ZVY8"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HTK24ZVY8",{anonymize_ip:!1})}</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href="/css/styles.css?v=0.1.1"><link rel=stylesheet href=/css/highlight.css><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script src=/js/main.js defer></script><title>Theme Update 14-01-2023 &ndash; dumb by default</title></head><body><div id=navbar><ul class=nav-col><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class=nav-item><a class=nav-link href=/posts/>Posts</a></li><li class=nav-item><a class=nav-link href=/resources/>Resources</a></li></ul></div><div class=wrapper><article><header class=single><nav class=crumb><ol style=padding-left:0><li class=crumb><a href=/>Home</a></li><li class=crumb><a href=/posts/>Posts</a></li><li class="crumb active">Theme Update 14-01-2023</li></ol></nav><h1 class=header-title>Theme Update 14-01-2023</h1><pre style=margin:0>published-date: 14 Jan 2023 22:44 &#43;0700</pre><pre style=margin:0>categories: <a href=http://previoip.github.io/categories/hugo-theme-update/>hugo-theme-update</a></pre><pre style=margin:0>tags: <a href=http://previoip.github.io/tags/static-site-generator/>static-site-generator</a> <a href=http://previoip.github.io/tags/html/>html</a></pre></header><hr><h6 id=edit-2023-01-15-131821>edit 2023-01-15 13:18:21</h6><p>Nevermind, none of these are used. I decided to go back to server-side rendering with Go-Chroma builtin syntax highlighting <a target=_blank class=extern href=https://gohugo.io/content-management/syntax-highlighting/>https://gohugo.io/content-management/syntax-highlighting/</a></p><p>further read: <a target=_blank class=extern href=https://gohugo.io/getting-started/configuration-markup/#highlight>https://gohugo.io/getting-started/configuration-markup/#highlight</a></p><p>I also add a copy to clipboard button.</p><p>JS added as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=ln> 1</span><span class=cl><span class=kd>function</span> <span class=nx>remEl</span><span class=p>(</span><span class=nx>parent</span><span class=p>,</span> <span class=nx>elClassName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=kr>const</span> <span class=nx>els</span> <span class=o>=</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>getElementsByClassName</span><span class=p>(</span><span class=nx>elClassName</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=nx>els</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nx>els</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>removeChild</span><span class=p>(</span><span class=nx>els</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=kd>function</span> <span class=nx>copyCodeblockButton</span><span class=p>(</span><span class=nx>targetNode</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=nx>element</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;input&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=nx>element</span><span class=p>.</span><span class=nx>type</span> <span class=o>=</span> <span class=s1>&#39;button&#39;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=nx>element</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=s1>&#39;Copy&#39;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=nx>element</span><span class=p>.</span><span class=nx>classList</span> <span class=o>=</span> <span class=s1>&#39;copy-button&#39;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=nx>element</span><span class=p>.</span><span class=nx>onclick</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=kd>let</span> <span class=nx>elCopy</span> <span class=o>=</span> <span class=nx>targetNode</span><span class=p>.</span><span class=nx>cloneNode</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=nx>remEl</span><span class=p>(</span><span class=nx>elCopy</span><span class=p>,</span> <span class=s1>&#39;ln&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=nx>navigator</span><span class=p>.</span><span class=nx>clipboard</span><span class=p>.</span><span class=nx>writeText</span><span class=p>(</span><span class=nx>elCopy</span><span class=p>.</span><span class=nx>innerText</span><span class=p>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Copied to clipboard successfully!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>  <span class=k>return</span> <span class=nx>element</span>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=s1>&#39;pre code&#39;</span><span class=p>).</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>el</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=kr>const</span> <span class=nx>child</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;span&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=kd>var</span> <span class=nx>copyCodeblockButtonEl</span> <span class=o>=</span> <span class=nx>copyCodeblockButton</span><span class=p>(</span><span class=nx>el</span><span class=p>)</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;display&#39;</span><span class=p>,</span> <span class=s1>&#39;flex&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;color&#39;</span><span class=p>,</span> <span class=s1>&#39;var(--tx-c-primary-half)&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;margin-bottom&#39;</span><span class=p>,</span> <span class=s1>&#39;.5em&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;align-items&#39;</span><span class=p>,</span> <span class=s1>&#39;center&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=nx>el</span><span class=p>.</span><span class=nx>attributes</span><span class=p>.</span><span class=nx>getNamedItem</span><span class=p>(</span><span class=s1>&#39;data-lang&#39;</span><span class=p>).</span><span class=nx>value</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>copyCodeblockButtonEl</span><span class=p>)</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>child</span><span class=p>,</span> <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>firstChild</span><span class=p>)</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>fancy!</p><p>Now to the old content:</p><hr><p>Now supports codeblock highlighting with <code>highlight.js</code>.</p><p>Code samples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>Get-ChildItem</span> <span class=n>-Path</span> <span class=s2>&#34;C:/target/path&#34;</span> <span class=n>-Depth</span> <span class=n>4</span> <span class=n>-Filter</span> <span class=p>*.</span><span class=n>pdf</span> <span class=p>|</span> <span class=nb>sort </span><span class=n>Descending</span> <span class=p>&gt;</span> <span class=n>pdf_files</span><span class=p>.</span><span class=n>txt</span>
</span></span></code></pre></div><p>also handles element overflow.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vb.net data-lang=vb.net><span class=line><span class=ln> 1</span><span class=cl><span class=k>Option</span> <span class=n>Explicit</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>Private</span> <span class=k>Function</span> <span class=nf>getMonthByIndex</span><span class=err>$</span><span class=p>(</span><span class=n>n</span> <span class=ow>As</span> <span class=kt>Long</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=c>&#39; returns month-name string from index n. Supports overflow wrap-around.
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c></span>    <span class=n>n</span> <span class=o>=</span> <span class=n>n</span> <span class=ow>Mod</span> <span class=n>12</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=n>getMonthByIndex</span> <span class=o>=</span> <span class=n>Array</span><span class=p>(</span><span class=s>&#34;JANUARY&#34;</span><span class=p>,</span> <span class=s>&#34;FEBRUARY&#34;</span><span class=p>,</span> <span class=s>&#34;MARCH&#34;</span><span class=p>,</span> <span class=s>&#34;APRIL&#34;</span><span class=p>,</span> <span class=s>&#34;MAY&#34;</span><span class=p>,</span> <span class=s>&#34;JUNE&#34;</span><span class=p>,</span> <span class=s>&#34;JULY&#34;</span><span class=p>,</span> <span class=s>&#34;AUGUST&#34;</span><span class=p>,</span> <span class=s>&#34;SEPTEMBER&#34;</span><span class=p>,</span> <span class=s>&#34;OCTOBER&#34;</span><span class=p>,</span> <span class=s>&#34;NOVEMBER&#34;</span><span class=p>,</span> <span class=s>&#34;DECEMBER&#34;</span><span class=p>)(</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=k>End</span> <span class=k>Function</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=k>Public</span> <span class=k>Sub</span> <span class=nf>test</span><span class=p>()</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=n>Debug</span><span class=p>.</span><span class=n>Assert</span> <span class=n>getMonthByIndex</span><span class=p>(</span><span class=n>69420</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;JANUARY&#34;</span> <span class=c>&#39; Fuck You, It&#39;s January!
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=c></span><span class=k>End</span> <span class=k>Sub</span>
</span></span></code></pre></div><p>I&rsquo;ve added some js, thinking it would look better with the <code>data-lang</code> visible in the element.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=ln> 1</span><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=s1>&#39;pre code&#39;</span><span class=p>).</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>el</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=kr>const</span> <span class=nx>child</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;span&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;display&#39;</span><span class=p>,</span> <span class=s1>&#39;flex&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;opacity&#39;</span><span class=p>,</span> <span class=p>.</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;margin-bottom&#39;</span><span class=p>,</span> <span class=s1>&#39;.5em&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nx>child</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=nx>el</span><span class=p>.</span><span class=nx>attributes</span><span class=p>.</span><span class=nx>getNamedItem</span><span class=p>(</span><span class=s1>&#39;data-lang&#39;</span><span class=p>).</span><span class=nx>value</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>child</span><span class=p>,</span> <span class=nx>el</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>firstChild</span><span class=p>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=nx>hljs</span><span class=p>.</span><span class=nx>highlightElement</span><span class=p>(</span><span class=nx>el</span><span class=p>);</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=nx>el</span><span class=p>.</span><span class=nx>parentElement</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>setProperty</span><span class=p>(</span><span class=s1>&#39;background-color&#39;</span><span class=p>,</span> <span class=nx>el</span><span class=p>.</span><span class=nx>style</span><span class=p>[</span><span class=s1>&#39;background-color&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=nx>el</span><span class=p>.</span><span class=nx>parentElement</span><span class=p>.</span><span class=nx>classList</span> <span class=o>+=</span> <span class=s1>&#39;hljs&#39;</span> <span class=c1>// wtf
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>17</span><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>This addition however still needs some fixing. Console logs shows some problem related to unescaped strings. The cause might be the unsafe settings I had to enable since this particular goldmark renderer somehow doesn&rsquo;t properly render inline HTML from markdown :(.</p></article></div><div id=footer><div style=display:flex;justify-content:center><small>Built with <a a target=_blank class=extern href=https://gohugo.io/>Hugo</a> | previoip &copy;2022</small></div></div></body></html>