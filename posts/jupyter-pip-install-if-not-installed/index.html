<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HTK24ZVY8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HTK24ZVY8")}</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href="/css/highlight.css?v=1.0.0"><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><style>:root{--f:1em;--w:30}html{margin:0 2em;max-width:calc(var(--f)*var(--w));font-size:var(--f)}body{margin:0;padding:0;font-family:monospace;scrollbar-face-color:ThreeDFace!important;scrollbar-shadow-color:ThreeDDarkShadow!important;scrollbar-highlight-color:ThreeDHighlight!important;scrollbar-3dlight-color:ThreeDLightShadow!important;scrollbar-darkshadow-color:ThreeDDarkShadow!important;scrollbar-track-color:Scrollbar!important;scrollbar-arrow-color:ButtonText!important}small{font-size:calc(var(--f)*.82)}*{font-size:inherit}p{padding-left:calc(var(--f)*1.6)}p canvas{outline:1px solid #000;width:calc(100% - var(--f)*1.6)}a{color:#1c69e5;text-decoration:underline}a:hover{color:#2072f5;text-decoration:none}a:active{color:#0062ff;text-decoration:none;background-color:var(--tx-c-hover)}blockquote{opacity:.75;background-color:#e9e61c68}div.mermaid .edgeLabel{padding:.2rem}img,div.mermaid svg{margin:auto;display:block;max-width:min(100%,calc(var(--f)*var(--w)));min-width:100px;background-color:#282a36;border-radius:.6rem}code:not([class]){background-color:#8e98d575;padding:0 .2em;border-radius:.2em}div.highlight pre{padding:1rem;border-radius:.6rem;overflow:scroll;overflow-y:auto;overflow-x:auto}div.highlight pre code span{margin-block-end:.1em}.disabled,.failed{pointer-events:none}.tc{padding-left:0;padding-right:0;text-align:center}.o50{opacity:.5}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:#43454ce6;border-radius:3px}::-webkit-scrollbar-thumb{background:#c1cdf6e6;border-radius:3px}#control div{display:flex;align-items:center;margin-top:.6em}#control input{font:inherit;display:inline-block;margin:0 .5em}#control p{margin:0}</style><title>Jupyter - One-Liner pip Install &ndash; dumb by default</title></head><body><div style=background-color:#69696969><br><h1 class=tc>dumb by default</h1><nav class=tc>[<a href=/>Home</a>]&nbsp;[<a href=/about/>About</a>]&nbsp;[<a href=/posts/>Posts</a>]&nbsp;[<a href=/resources/>Resources</a>]&nbsp;[<a href=/applets/>Applets</a>]&nbsp;</nav><hr></div><p style=padding:0><span>dir: <i><a href=/>Home</a> /
<a href=/posts/>Posts</a> /
<span>Jupyter - One-Liner pip Install</span></i></span><br><span>published-date: 20 Oct 2024 16:22 +0700</span><br><span>categories: [<a href=http://previoip.github.io/categories/misc/>misc</a>] [<a href=http://previoip.github.io/categories/quickie/>quickie</a>]</span><br><span>tags: [<a href=http://previoip.github.io/tags/python/>python</a>] [<a href=http://previoip.github.io/tags/jupyter/>jupyter</a>]</span><br></p><h1 class=tc>Jupyter - One-Liner pip Install</h1><hr><div><p>When working with jupyter notebook, you might come across the need to install external packages in your environment with your preferred package manager such as <code>pip</code>. Say you&rsquo;re not using conda or other environment managers, which your option is to install packages by invoking bash from the notebook itself. I find this approach to be more portable than installing from <code>requirements.txt</code> dump from <code>pip list</code> spec, which can be a hassle when you&rsquo;re constrained to use google colab.</p><p>Problem though when we invoke <code>pip &lt;package-name></code> there are time wasted since pip will need to check whether the package is already installed every time we run the cell containing pip installs. To combat this we can perform check with <code>pkgutil</code> and install accordingly with a one-liner.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>! <span class=k>if</span> <span class=o>[</span> <span class=k>$(</span>python3 -c <span class=s2>&#34;import pkgutil; print(1 if pkgutil.find_loader(\&#34;&lt;import-module-name&gt;\&#34;) else 0)&#34;</span><span class=k>)</span> <span class=o>=</span> <span class=s2>&#34;0&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> pip install &lt;package-name&gt;
</span></span></code></pre></div><p>Be aware that module name might differ from the package name containing that module.</p><p>If there are more than one package of interest, then we can wrap them as bash function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>! <span class=k>function</span> pipckpkg <span class=o>()</span> <span class=o>{</span> <span class=nb>echo</span> <span class=s2>&#34;checking module </span><span class=nv>$1</span><span class=s2> from package </span><span class=nv>$2</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>if</span> <span class=o>[</span> <span class=k>$(</span>python3 -c <span class=s2>&#34;import pkgutil; print(1 if pkgutil.find_loader(\&#34;</span><span class=nv>$1</span><span class=s2>\&#34;) else 0)&#34;</span><span class=k>)</span> <span class=o>=</span> <span class=s2>&#34;0&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> pip install -U <span class=nv>$2</span><span class=p>;</span> <span class=k>else</span> <span class=nb>echo</span> <span class=s2>&#34;skipping </span><span class=nv>$2</span><span class=s2>&#34;</span><span class=p>;</span><span class=k>fi</span><span class=p>;</span> <span class=o>}</span> <span class=p>;</span><span class=se>\
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=se></span>! pipckpkg <span class=s2>&#34;openpyxl&#34;</span> <span class=s2>&#34;openpyxl&#34;</span> <span class=p>;</span><span class=se>\
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=se></span>! pipckpkg <span class=s2>&#34;kaleido&#34;</span> <span class=s2>&#34;kaleido&#34;</span> <span class=p>;</span><span class=se>\
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=se></span>! pipckpkg <span class=s2>&#34;pptx&#34;</span> <span class=s2>&#34;python-pptx&#34;</span> <span class=p>;</span><span class=se>\
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=se></span>! pipckpkg <span class=s2>&#34;pypdf&#34;</span> <span class=s2>&#34;pypdf&#34;</span>
</span></span></code></pre></div><p>Note the trailing semicolon and backward-slash, as the function definition only exists on that call.</p></div><br><br><br><br><p class=tc>Built with <a a target=_blank class=extern href=https://gohugo.io/>Hugo</a> | previoip (c) 2025</p></body></html>