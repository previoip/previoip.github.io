<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-8HTK24ZVY8"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8HTK24ZVY8")}</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href="/css/highlight.css?v=1.0.0"><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><style>:root{--f:1em;--w:30}html{margin:0 2em;max-width:calc(var(--f)*var(--w));font-size:var(--f)}body{margin:0;padding:0;font-family:monospace;scrollbar-face-color:ThreeDFace!important;scrollbar-shadow-color:ThreeDDarkShadow!important;scrollbar-highlight-color:ThreeDHighlight!important;scrollbar-3dlight-color:ThreeDLightShadow!important;scrollbar-darkshadow-color:ThreeDDarkShadow!important;scrollbar-track-color:Scrollbar!important;scrollbar-arrow-color:ButtonText!important}*{font-size:inherit}p{padding-left:calc(var(--f)*1.6)}a{color:#2d6ed7;text-decoration:underline}a:hover{color:#104db0;text-decoration:none}a:active{color:#2d6ed7;text-decoration:none;background-color:var(--tx-c-hover)}blockquote{opacity:.75;background-color:#e9e61c68}div.mermaid .edgeLabel{padding:.2rem}img,div.mermaid svg{margin:auto;display:block;max-width:min(100%,calc(var(--f)*var(--w)));min-width:100px}code:not([class]){background-color:#4d4f500f;padding:.1em .4rem;border-radius:.2rem}div.highlight pre{padding:1rem;border-radius:.6rem;overflow:scroll;overflow-y:auto;overflow-x:auto}div.highlight pre code span{margin-block-end:.1em}.disabled,.failed{pointer-events:none}.tc{padding-left:0;padding-right:0;text-align:center}.o50{opacity:.5}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--tx-c-tp-primary-quarter);border-radius:3px}::-webkit-scrollbar-thumb{background:var(--tx-c-primary-half);border-radius:3px}</style><title>How I Built A Simple (Horrible) 3D Graphics Engine in python matplotlib - Part 4: Speen! &ndash; dumb by default</title></head><body><div style=background-color:#69696969><br><h1 class=tc>dumb by default</h1><nav class=tc>[<a href=/>Home</a>]&nbsp;[<a href=/about/>About</a>]&nbsp;[<a href=/posts/>Posts</a>]&nbsp;[<a href=/resources/>Resources</a>]&nbsp;</nav><hr></div><p style=padding:0><span>dir: <i><a href=/>Home</a> /
<a href=/posts/>Posts</a> /
<span>How I Built A Simple (Horrible) 3D Graphics â€¦</span></i></span><br><span>published-date: 17 Feb 2023 17:16 +0700</span><br><span>categories: [<a href=http://previoip.github.io/categories/dumber-day-by-day/>dumber-day-by-day</a>] [<a href=http://previoip.github.io/categories/python-hijinks/>python-hijinks</a>]</span><br><span>tags: [<a href=http://previoip.github.io/tags/python/>python</a>] [<a href=http://previoip.github.io/tags/matplotlib/>matplotlib</a>]</span><br></p><h1 class=tc>How I Built A Simple (Horrible) 3D Graphics Engine in python matplotlib - Part 4: Speen!</h1><hr><div><h3 id=posts-in-this-series>Posts in This Series</h3><ul><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib/>Part 1 - Intro</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-2/>Part 2 - Plotting with plt</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-3/>Part 3 - Square but 3D</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-4/>Part 4 - Speen!</a></li><li><a href=../../posts/building-3d-graphic-engine-in-matplotlib-5/>Afterword</a></li></ul><hr><img src=./images/speen.gif alt=speen><p>Before we begin, there&rsquo;s a reason why vertex buffer needed to be turned into as <code>np.array</code>. Numpy is packed with various math magic only wizards can do. At least to my knowledge.</p><p>By casting our python builtin list into numpy array, we basically transformed our vertices vector buffer list into matrix, on which we can do various stuff with it.</p><h1 id=numpy-implementation class=tc>Numpy Implementation</h1><p>One thing I want to point out, writing min and max for the limit argument for 3D plt constructor is a little bit finicky. The resulting graph will always stretch or de-stretch our cube since all the limit follows each axis&rsquo;s extrema. This limit should&rsquo;ve been assigned as a constant for a known maximum distance of your cube vertex. Or, with a little bit of trickery we can just make a function that dynamically calculate the extrema for us.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_extrema</span><span class=p>(</span><span class=n>vertices</span><span class=p>,</span> <span class=n>origin</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>  <span class=c1># finds min and max of each axis, which represents two adjacent outermost coordinate</span>
</span></span><span class=line><span class=cl>  <span class=n>x_max</span><span class=p>,</span> <span class=n>y_max</span><span class=p>,</span> <span class=n>z_max</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=p>(</span><span class=n>vertices</span> <span class=o>-</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=o>*</span><span class=n>origin</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span><span class=o>.</span><span class=n>max</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>x_min</span><span class=p>,</span> <span class=n>y_min</span><span class=p>,</span> <span class=n>z_min</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=p>(</span><span class=n>vertices</span> <span class=o>-</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=o>*</span><span class=n>origin</span><span class=p>,</span> <span class=mi>1</span><span class=p>]))</span><span class=o>.</span><span class=n>min</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># calculate the distance </span>
</span></span><span class=line><span class=cl>  <span class=n>d</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(((</span><span class=n>x_max</span> <span class=o>-</span> <span class=n>x_min</span><span class=p>)</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=p>(</span><span class=n>y_max</span> <span class=o>-</span> <span class=n>y_min</span><span class=p>)</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=p>((</span><span class=n>z_max</span> <span class=o>-</span> <span class=n>z_min</span><span class=p>)</span><span class=o>**</span><span class=mi>2</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=n>r</span> <span class=o>=</span> <span class=n>d</span><span class=o>/</span><span class=mi>2</span> 
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1># extrema =&gt; origin with offset r</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>((</span><span class=n>origin</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>-</span> <span class=n>r</span><span class=p>,</span> <span class=n>origin</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>r</span><span class=p>),</span> <span class=p>(</span><span class=n>origin</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>r</span><span class=p>,</span> <span class=n>origin</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>r</span><span class=p>),</span> <span class=p>(</span><span class=n>origin</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>-</span> <span class=n>r</span><span class=p>,</span> <span class=n>origin</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>r</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=transformation-matrixes class=tc>Transformation Matrixes</h2><p>This implementation of transformation matrixes is different compared to the Colab code I shared in the first post on the series. But in the overall idea is still the same throughout.</p><p>For further read on linear transformation, you can refer to this <a target=_blank class=extern href=https://en.wikipedia.org/wiki/Transformation_matrix>Wikipedia</a> article. In this post not all matrixes are implemented. But in practice you can build any transformation matrix constructor that fits your need. Here are few examples.</p><h3 id=translation>Translation</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>mat_translate</span><span class=p>(</span><span class=n>values</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>  <span class=n>translation_matrix</span> <span class=o>=</span> \
</span></span><span class=line><span class=cl>  <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>1</span><span class=p>,</span>         <span class=mi>0</span><span class=p>,</span>         <span class=mi>0</span><span class=p>,</span>         <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>         <span class=mi>1</span><span class=p>,</span>         <span class=mi>0</span><span class=p>,</span>         <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>         <span class=mi>0</span><span class=p>,</span>         <span class=mi>1</span><span class=p>,</span>         <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>values</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>values</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>])</span>    
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>translation_matrix</span>
</span></span></code></pre></div><h3 id=rotation>Rotation</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>mat_rotate</span><span class=p>(</span><span class=n>values</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>cx</span><span class=p>,</span> <span class=n>sx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>  <span class=n>cy</span><span class=p>,</span> <span class=n>sy</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>  <span class=n>cz</span><span class=p>,</span> <span class=n>sz</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>2</span><span class=p>]),</span> <span class=n>np</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=n>rz</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=n>cz</span><span class=p>,</span>  <span class=o>-</span><span class=n>sz</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=n>sz</span><span class=p>,</span>  <span class=n>cz</span><span class=p>,</span>  <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>])</span>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>ry</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=n>cy</span><span class=p>,</span>  <span class=mi>0</span><span class=p>,</span>    <span class=n>sy</span><span class=p>,</span>  <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>,</span>    <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=o>-</span><span class=n>sy</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span>    <span class=n>cy</span><span class=p>,</span>  <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>])</span>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>rx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>1</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=n>cx</span><span class=p>,</span>   <span class=o>-</span><span class=n>sx</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=n>sx</span><span class=p>,</span>   <span class=n>cx</span><span class=p>,</span>  <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span>   <span class=mi>0</span><span class=p>,</span>    <span class=mi>0</span><span class=p>,</span>   <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>])</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=n>rotation_matrix</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linalg</span><span class=o>.</span><span class=n>multi_dot</span><span class=p>([</span><span class=n>rz</span><span class=p>,</span> <span class=n>ry</span><span class=p>,</span> <span class=n>rx</span><span class=p>])</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>rotation_matrix</span>
</span></span></code></pre></div><h3 id=scale>Scale</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>mat_scale</span><span class=p>(</span><span class=n>values</span><span class=o>=</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>  <span class=n>scale_matrix</span> <span class=o>=</span> \
</span></span><span class=line><span class=cl>  <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=n>values</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=n>values</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>values</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span>         <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>])</span>    
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>scale_matrix</span>
</span></span></code></pre></div><h2 id=applying-transformation class=tc>Applying transformation</h2><p>Using previous post&rsquo;s vertices, We&rsquo;ll re-plot the cube with our extrema function which will result in seemingly smaller cube.</p><img src=./images/Figure_2.png alt="Figure 1"><p>Now constructing transformation steps can be done as follows.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># for the sake of continuity, extremas refer to verts before transformation.</span>
</span></span><span class=line><span class=cl><span class=n>plot_limit</span> <span class=o>=</span> <span class=n>get_extrema</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># generate transformation matrix</span>
</span></span><span class=line><span class=cl><span class=n>m_t</span> <span class=o>=</span> <span class=n>mat_translate</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span> <span class=c1># translates 2 unit in x axis</span>
</span></span><span class=line><span class=cl><span class=n>m_r</span> <span class=o>=</span> <span class=n>mat_rotation</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>  <span class=c1># rotates 2 radian ccw in x axis</span>
</span></span><span class=line><span class=cl><span class=n>m_s</span> <span class=o>=</span> <span class=n>mat_scale</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span><span class=mf>.5</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span>    <span class=c1># scales by .5 in y axis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># transform vertices. in this demo I&#39;ll use seperate variable to contain transformed verts.</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>vertices</span><span class=p>,</span> <span class=n>m_t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>transformed_vertices</span><span class=p>,</span> <span class=n>m_r</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>transformed_vertices</span><span class=p>,</span> <span class=n>m_s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># &gt;&gt; which is equivalent to:</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linalg</span><span class=o>.</span><span class=n>multi_dot</span><span class=p>([</span><span class=n>vertices</span><span class=p>,</span> <span class=n>m_t</span><span class=p>,</span> <span class=n>m_r</span><span class=p>,</span> <span class=n>m_s</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># &gt;&gt; or even better, create reusable desired transformation into one transformation matrix</span>
</span></span><span class=line><span class=cl><span class=n>m_A</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linalg</span><span class=o>.</span><span class=n>multi_dot</span><span class=p>([</span><span class=n>m_t</span><span class=p>,</span> <span class=n>m_r</span><span class=p>,</span> <span class=n>m_s</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>vertices</span><span class=p>,</span> <span class=n>m_A</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># plot resulting verts</span>
</span></span><span class=line><span class=cl><span class=n>x_values</span> <span class=o>=</span> <span class=n>transformed_vertices</span><span class=p>[:,</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>y_values</span> <span class=o>=</span> <span class=n>transformed_vertices</span><span class=p>[:,</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>z_values</span> <span class=o>=</span> <span class=n>transformed_vertices</span><span class=p>[:,</span><span class=mi>2</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ConstructSubplot3D</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=n>plot_limit</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>ax</span><span class=o>.</span><span class=n>plot3D</span><span class=p>(</span><span class=n>x_values</span><span class=p>,</span> <span class=n>y_values</span><span class=p>,</span> <span class=n>z_values</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>Which in turn will result in this following graph.</p><img src=images/Figure_3.png alt="Figure 3"><p>Goofy ahh lookin cube.</p><h1 id=footnote class=tc>Footnote</h1><p>Transformation dot product ordering does matter! Take a look on snippet below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># oh vey</span>
</span></span><span class=line><span class=cl><span class=n>plot_limit</span> <span class=o>=</span> <span class=n>get_extrema</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># transformation matrix, same as above</span>
</span></span><span class=line><span class=cl><span class=n>m_t</span> <span class=o>=</span> <span class=n>mat_translate</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m_r</span> <span class=o>=</span> <span class=n>mat_rotation</span><span class=p>((</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m_s</span> <span class=o>=</span> <span class=n>mat_scale</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span><span class=mf>.5</span><span class=p>,</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Now first matrix is just a copy of previous multi_dot</span>
</span></span><span class=line><span class=cl><span class=n>m_A_1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linalg</span><span class=o>.</span><span class=n>multi_dot</span><span class=p>([</span><span class=n>m_t</span><span class=p>,</span> <span class=n>m_r</span><span class=p>,</span> <span class=n>m_s</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># On the second matrix, I switched the order of rotation and scaling matrix</span>
</span></span><span class=line><span class=cl><span class=n>m_A_2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>linalg</span><span class=o>.</span><span class=n>multi_dot</span><span class=p>([</span><span class=n>m_t</span><span class=p>,</span> <span class=n>m_s</span><span class=p>,</span> <span class=n>m_r</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># .dot.dot.dot.dot.dot.dot.dot.dot.dot.dot.dot.dot.dot.dot...</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices_1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>vertices</span><span class=p>,</span> <span class=n>m_A_1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>transformed_vertices_2</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>dot</span><span class=p>(</span><span class=n>vertices</span><span class=p>,</span> <span class=n>m_A_2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># plot resulting verts. I&#39;ll just one-line&#39;d everything at this point. sorry.</span>
</span></span><span class=line><span class=cl><span class=n>x_values_1</span><span class=p>,</span> <span class=n>y_values_1</span><span class=p>,</span> <span class=n>z_values_1</span> <span class=o>=</span> <span class=n>transformed_vertices_1</span><span class=p>[:,</span><span class=mi>0</span><span class=p>],</span> <span class=n>transformed_vertices_1</span><span class=p>[:,</span><span class=mi>1</span><span class=p>],</span> <span class=n>transformed_vertices_1</span><span class=p>[:,</span><span class=mi>2</span><span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=n>x_values_2</span><span class=p>,</span> <span class=n>y_values_2</span><span class=p>,</span> <span class=n>z_values_2</span> <span class=o>=</span> <span class=n>transformed_vertices_2</span><span class=p>[:,</span><span class=mi>0</span><span class=p>],</span> <span class=n>transformed_vertices_2</span><span class=p>[:,</span><span class=mi>1</span><span class=p>],</span> <span class=n>transformed_vertices_2</span><span class=p>[:,</span><span class=mi>2</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=p>,</span> <span class=n>ax</span> <span class=o>=</span> <span class=n>ConstructSubplot3D</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=n>plot_limit</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>figsize</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>5</span><span class=p>))</span> 
</span></span><span class=line><span class=cl><span class=n>ax</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>plot3D</span><span class=p>(</span><span class=n>x_values_1</span><span class=p>,</span> <span class=n>y_values_1</span><span class=p>,</span> <span class=n>z_values_1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>ax</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>plot3D</span><span class=p>(</span><span class=n>x_values_2</span><span class=p>,</span> <span class=n>y_values_2</span><span class=p>,</span> <span class=n>z_values_2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>Which in turn will result in this following graph. <small>yes i just copy-pasted this line</small></p><img src=images/Figure_4.png alt="Figure 4"><p>The figure on the left is our og transformation, where scaling is applied after the cube is rotated. While right figure shows if scale is applied before being rotated.</p><h1 id=and-thats-a-wrap class=tc>And.. That&rsquo;s a Wrap!</h1><p>I&rsquo;ll add another post where I&rsquo;ll discuss turning these graph into gif using <code>ffmpeg</code>, limitations of this basically useless write-up, and another google.colab notebook you can play around with.</p></div><p class=tc>Built with <a a target=_blank class=extern href=https://gohugo.io/>Hugo</a> | previoip (c) 2024</p></body></html>